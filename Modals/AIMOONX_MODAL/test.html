<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Coin Analysis Dashboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade-in { animation: fadeIn 0.3s ease-out; }
        
        .gradient-bg {
            background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
        }
        
        .news-container {
            max-height: 300px;
            overflow-y: auto;
            scrollbar-width: thin;
            scrollbar-color: #4f46e5 #e0e7ff;
        }
        
        .news-container::-webkit-scrollbar {
            width: 8px;
        }
        
        .news-container::-webkit-scrollbar-thumb {
            background-color: #4f46e5;
            border-radius: 4px;
        }
    </style>
</head>
<body class="bg-gray-100 min-h-screen p-4">
    <!-- Online Version -->
    <div class="max-w-6xl mx-auto space-y-8">
        <div class="bg-white rounded-xl shadow-xl p-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">Online Version</h2>
            <div id="online-component" class="space-y-4"></div>
        </div>

        <!-- Offline Version -->
        <div class="bg-white rounded-xl shadow-xl p-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-4">Offline Version</h2>
            <div id="offline-component" class="space-y-4"></div>
        </div>
    </div>

    <!-- Modal Container -->
    <div id="modal-container" class="fixed inset-0 bg-black bg-opacity-50 hidden items-center justify-center p-4"></div>

<script>
// ======================
// OFFLINE VERSION COMPONENT
// ======================
class OfflineCoinAnalyser {
    constructor(container) {
        this.container = container;
        this.createButton();
    }

    createButton() {
        const button = document.createElement('button');
        button.className = 'px-6 py-3 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600 transition-all flex items-center gap-2';
        button.innerHTML = `
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M3 5a2 2 0 012-2h10a2 2 0 012 2v8a2 2 0 01-2 2h-2.22l.123.489.804.804A1 1 0 0113 18H7a1 1 0 01-.707-1.707l.804-.804L7.22 15H5a2 2 0 01-2-2V5zm5.771 7.175l1.042-2.084a1 1 0 01.894-.553h.887a.75.75 0 00.672-.418l1.659-3.318a1 1 0 011.788.894l-1.659 3.318a2.25 2.25 0 01-2.017 1.256h-.887l-1.042 2.084a1 1 0 01-1.788 0z" clip-rule="evenodd" />
            </svg>
            ØªØ­Ù„ÛŒÙ„ Ø¢ÙÙ„Ø§ÛŒÙ†
        `;
        button.onclick = () => this.showModal(true);
        this.container.appendChild(button);
    }

    async showModal() {
        const modal = new AnalysisModal(true);
        modal.show();
    }
}

// ======================
// ONLINE VERSION COMPONENT
// ======================
class OnlineCoinAnalyser {
    constructor(container) {
        this.container = container;
        this.createButton();
    }

    createButton() {
        const button = document.createElement('button');
        button.className = 'px-6 py-3 bg-indigo-500 text-white rounded-lg hover:bg-indigo-600 transition-all flex items-center gap-2';
        button.innerHTML = `
            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                <path d="M13 7H7v6h6V7z" />
                <path fill-rule="evenodd" d="M7 2a1 1 0 012 0v1h2V2a1 1 0 112 0v1h2a2 2 0 012 2v2h1a1 1 0 110 2h-1v2h1a1 1 0 110 2h-1v2a2 2 0 01-2 2h-2v1a1 1 0 11-2 0v-1H9v1a1 1 0 11-2 0v-1H5a2 2 0 01-2-2v-2H2a1 1 0 110-2h1V9H2a1 1 0 010-2h1V5a2 2 0 012-2h2V2zM5 5h10v10H5V5z" clip-rule="evenodd" />
            </svg>
            ØªØ­Ù„ÛŒÙ„ Ø¢Ù†Ù„Ø§ÛŒÙ†
        `;
        button.onclick = () => this.showModal();
        this.container.appendChild(button);
    }

    async showModal() {
        const modal = new AnalysisModal();
        modal.show();
    }
}

// ======================
// SHARED ANALYSIS MODAL
// ======================
class AnalysisModal {
    constructor(offlineMode = false) {
        this.offlineMode = offlineMode;
        this.modalId = `modal_${Math.random().toString(36).substr(2, 9)}`;
        this.createModal();
    }

    createModal() {
        const modalHTML = `
            <div id="${this.modalId}" class="bg-white rounded-2xl shadow-2xl w-full md:w-[800px] max-h-[90vh] overflow-hidden animate-fade-in">
                <!-- Header -->
                <div class="gradient-bg p-6 flex justify-between items-center">
                    <h3 class="text-xl font-semibold text-white">ğŸ“ˆ ØªØ­Ù„ÛŒÙ„ Ù¾ÛŒØ´Ø±ÙØªÙ‡ Ø¨Ø§Ø²Ø§Ø±</h3>
                    <button class="close-button text-white hover:text-indigo-100 transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>

                <!-- Content -->
                <div class="p-6 space-y-6">
                    <!-- Input Section -->
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <div class="space-y-3">
                            <label class="block text-gray-700 font-medium">Ø¬ÙØª Ø§Ø±Ø²</label>
                            <select class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all">
                                ${['BTC/USDT', 'ETH/USDT', 'XRP/USDT', 'LTC/USDT'].map(pair => `
                                    <option value="${pair}">${pair}</option>
                                `).join('')}
                            </select>
                        </div>

                        <div class="space-y-3">
                            <label class="block text-gray-700 font-medium">ØªØ§ÛŒÙ… ÙØ±ÛŒÙ…</label>
                            <select class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all">
                                ${['1H', '4H', '1D', '1W'].map(tf => `
                                    <option value="${tf}">${tf}</option>
                                `).join('')}
                            </select>
                        </div>

                        <div class="space-y-3">
                            <label class="block text-gray-700 font-medium">ØªØ¹Ø¯Ø§Ø¯ Ú©Ù†Ø¯Ù„â€ŒÙ‡Ø§</label>
                            <input type="number" value="50" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all">
                        </div>

                        <div class="space-y-3">
                            <label class="block text-gray-700 font-medium">Ø§Ù†Ø¯ÛŒÚ©Ø§ØªÙˆØ±Ù‡Ø§</label>
                            <select class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-indigo-500 focus:ring-2 focus:ring-indigo-200 transition-all">
                                <option value="all">Ù‡Ù…Ù‡ Ø§Ù†Ø¯ÛŒÚ©Ø§ØªÙˆØ±Ù‡Ø§</option>
                                <option value="rsi">RSI</option>
                                <option value="macd">MACD</option>
                            </select>
                        </div>
                    </div>

                    <!-- Analysis Results -->
                    <div class="space-y-6 hidden analysis-results">
                        <!-- Result Cards -->
                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                            <div class="bg-green-50 p-4 rounded-xl">
                                <div class="text-green-600 font-bold text-lg">Ø®Ø±ÛŒØ¯</div>
                                <div class="text-gray-600 mt-2">Ø§Ø­ØªÙ…Ø§Ù„ Ù…ÙˆÙÙ‚ÛŒØª: 78%</div>
                            </div>
                            <div class="bg-blue-50 p-4 rounded-xl">
                                <div class="text-blue-600 font-bold text-lg">Ø§Ù„Ú¯ÙˆÛŒ Ø´Ù†Ø§Ø³Ø§ÛŒÛŒ Ø´Ø¯Ù‡</div>
                                <div class="text-gray-600 mt-2">Ú†Ú©Ø´ ØµØ¹ÙˆØ¯ÛŒ</div>
                            </div>
                            <div class="bg-purple-50 p-4 rounded-xl">
                                <div class="text-purple-600 font-bold text-lg">ØªÙˆØµÛŒÙ‡ Ø³Ø±Ù…Ø§ÛŒÙ‡</div>
                                <div class="text-gray-600 mt-2">2-5% Ø³Ø±Ù…Ø§ÛŒÙ‡</div>
                            </div>
                        </div>

                        <!-- News Feed -->
                        <div class="bg-gray-50 p-4 rounded-xl">
                            <h4 class="font-medium text-gray-700 mb-3">Ø§Ø®Ø¨Ø§Ø± Ù…Ø±ØªØ¨Ø·</h4>
                            <div class="news-container space-y-3">
                                ${Array.from({length: 15}, (_, i) => `
                                    <div class="p-3 bg-white rounded-lg hover:bg-gray-50 transition-colors">
                                        <div class="text-sm font-medium text-gray-800">Ø®Ø¨Ø± Ù…Ù‡Ù… Ø¨Ø§Ø²Ø§Ø± ${i+1}</div>
                                        <div class="text-xs text-gray-500 mt-1">2 Ø³Ø§Ø¹Øª Ù¾ÛŒØ´</div>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                    </div>

                    <!-- Action Buttons -->
                    <div class="flex flex-col md:flex-row gap-4">
                        <button class="analyze-button w-full py-4 gradient-bg text-white rounded-xl hover:opacity-90 transition-opacity flex items-center justify-center gap-2">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 animate-spin hidden" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
                            </svg>
                            Ø´Ø±ÙˆØ¹ ØªØ­Ù„ÛŒÙ„
                        </button>
                        <button class="w-full md:w-auto py-4 px-8 border-2 border-gray-200 text-gray-600 rounded-xl hover:bg-gray-50 transition-colors">
                            ØªÙ†Ø¸ÛŒÙ…Ø§Øª Ù¾ÛŒØ´Ø±ÙØªÙ‡
                        </button>
                    </div>
                </div>
            </div>
        `;

        const tempDiv = document.createElement('div');
        tempDiv.innerHTML = modalHTML;
        this.modalElement = tempDiv.firstElementChild;
        this.addEventListeners();
    }

    addEventListeners() {
        const closeButton = this.modalElement.querySelector('.close-button');
        closeButton.addEventListener('click', () => this.hide());
    }

    show() {
        const container = document.getElementById('modal-container');
        container.classList.remove('hidden');
        container.appendChild(this.modalElement);
    }

    hide() {
        const container = document.getElementById('modal-container');
        this.modalElement.remove();
        if (!container.children.length) {
            container.classList.add('hidden');
        }
    }
}

// Initialize Components
document.addEventListener('DOMContentLoaded', () => {
    // Initialize online component
    const onlineContainer = document.getElementById('online-component');
    new OnlineCoinAnalyser(onlineContainer);

    // Initialize offline component
    const offlineContainer = document.getElementById('offline-component');
    new OfflineCoinAnalyser(offlineContainer);

    // Handle modal container clicks
    const modalContainer = document.getElementById('modal-container');
    modalContainer.addEventListener('click', (e) => {
        if (e.target === modalContainer) {
            modalContainer.classList.add('hidden');
            modalContainer.innerHTML = '';
        }
    });
});
</script>
</body>
</html>